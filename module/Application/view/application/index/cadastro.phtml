<?if($this->form):?>

<?=$this->headScript()->prependFile($this->basePath() . '/js/form/cadastro-form.js');?>
<script>
    function add_dependente() {
        var currentCount = parseInt($('#countDependentes').val());
        var template = $('form > fieldset > span').data('template');
        template = template.replace(/__index__/g, currentCount);

        $('form > fieldset > span').append(template);
        
        currentCount++;
        $('#countDependentes').val(currentCount);
        
        return false;
    }
</script>

<div id="err"></div>

<div id="help"></div>

<div class="jumbotron">
<?
    $form = $this->form;
    $form->prepare();
    
    echo $this->form()->openTag($form);
    echo $this->formCollection($form);
    echo $this->form()->closeTag();    
?>
</div>

<?else:?>
    <div class="messages">
        <?if($this->excpt):?>
            <p>Ops, parece que ocorreu um erro!<br/> 
                Tente novamente mais tarde.</p>
        <?elseif($this->err_msg):?>
        
            <?foreach($this->err_msg as $msg):?>
                <p><?=$msg?></p>
            <?endforeach;?>
        
        <?elseif($this->sucesso == 1):?>
            <p>Seu cadastro foi efetuado com sucesso. Seu número de protocolo é:</p>
            <h1><?=$this->protocolo?></h1>
            <p>Guarde ele com cuidado, por esta é a comprovação de que você se inscreveu 
            no programa.</p>
        <?endif;?>
    </div>
<?endif;?>
